{% load static %}
{% load i18n %}
{% load custom_tags %}
{% load breadcrumbs %}

<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- SEO Title -->
<title>{% block title %}{% trans "Reflectivo – Το προσωπικό σου ημερολόγιο για καθημερινή ενδοσκόπηση" %}{% endblock %}</title>
<meta name="description" content="{% trans 'Το Reflectivo είναι ο προσωπικός σου χώρος για σκέψη, αυτογνωσία και εξέλιξη. Ξεκίνα το δικό σου ημερολόγιο σήμερα – εντελώς δωρεάν.'|escape }}">
<link rel="canonical" href="https://reflectivo.site/">

<!-- Open Graph -->
<meta property="og:title" content="{% trans 'Reflectivo – Το προσωπικό σου ημερολόγιο για καθημερινή ενδοσκόπηση'|escape }}">
<meta property="og:description" content="{% trans 'Το Reflectivo είναι ο προσωπικός σου χώρος για σκέψη, αυτογνωσία και εξέλιξη. Ξεκίνα το δικό σου ημερολόγιο σήμερα – εντελώς δωρεάν.'|escape }}">
<meta property="og:type" content="website">
<meta property="og:url" content="https://reflectivo.site/">
<meta property="og:image" content="https://reflectivo.site/static/images/og-banner.jpg">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{% trans 'Reflectivo – Το προσωπικό σου ημερολόγιο για καθημερινή ενδοσκόπηση'|escape }}">
<meta name="twitter:description" content="{% trans 'Το Reflectivo είναι ο προσωπικός σου χώρος για σκέψη, αυτογνωσία και εξέλιξη. Ξεκίνα το δικό σου ημερολόγιο σήμερα – εντελώς δωρεάν.'|escape }}">
<meta name="twitter:image" content="https://reflectivo.site/static/images/og-banner.png">

<link rel="alternate" hreflang="en" href="https://reflectivo.site/en/" />
<link rel="alternate" hreflang="el" href="https://reflectivo.site/el/" />

<!-- Favicon -->
<link rel="icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">

<!-- CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="{% static 'css/bootstrap-icons.css' %}">
<link rel="stylesheet" href="{% static 'css/tooplate-mini-finance.css' %}">
<link rel="stylesheet" href="{% static 'css/styles.css' %}">
<link rel="stylesheet" href="{% static 'css/form-pack.css' %}">

<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,200;0,400;0,700;1,200&family=Unbounded:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto&display=swap">

</head>


<body>
<div class="d-flex flex-column min-vh-100">
{% block header %}
<header class="navbar sticky-top flex-md-nowrap">
<div class="col-md-3 col-lg-3 me-0 px-3 fs-6">
  <a class="navbar-brand d-flex align-items-center" href="{% url 'index' %}">
    <img src="{% static 'images/reflectivo-logo.png' %}" alt="Reflectivo Logo" style="height: 38px;">
  </a>
</div>

  <form class="custom-form header-form ms-lg-3 me-lg-auto" action="#" method="get">
    <input class="form-control" name="search" type="text" placeholder="Αναζήτηση..." aria-label="Search">
  </form>

  {% if user.is_authenticated %}
  <div class="navbar-nav me-lg-2">
      <div class="nav-item text-nowrap d-flex align-items-center">




<!-- Desktop dropdown -->
<form action="{% url 'set_language' %}" method="post" class="d-none d-md-block">
  {% csrf_token %}
  <input type="hidden" name="next" value="{{ request.path }}">
  <select name="language" class="language-select {{ LANGUAGE_CODE }}" onchange="this.form.submit()">
    <option value="el" {% if LANGUAGE_CODE == 'el' %}selected{% endif %}>Ελληνικά</option>
    <option value="en" {% if LANGUAGE_CODE == 'en' %}selected{% endif %}>English</option>
  </select>
</form>

<!-- Mobile flag-only dropdown -->
<div class="dropdown d-block d-md-none">
  <button class="btn btn-sm border-0 bg-transparent dropdown-toggle p-0" type="button" id="langDropdown" data-bs-toggle="dropdown" aria-expanded="false">
    <img src="{% static 'images/flag/gr.png' %}" alt="lang" class="lang-flag-icon" {% if LANGUAGE_CODE == 'en' %}style="display: none;"{% endif %}>
    <img src="{% static 'images/flag/gb.png' %}" alt="lang" class="lang-flag-icon" {% if LANGUAGE_CODE == 'el' %}style="display: none;"{% endif %}>
  </button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="langDropdown">
    <li>
      <form action="{% url 'set_language' %}" method="post">
        {% csrf_token %}
        <input type="hidden" name="next" value="{{ request.path }}">
        <input type="hidden" name="language" value="el">
        <button type="submit" class="dropdown-item d-flex align-items-center">
          <img src="{% static 'images/flag/gr.png' %}" width="20" class="me-2"> Ελληνικά
        </button>
      </form>
    </li>
    <li>
      <form action="{% url 'set_language' %}" method="post">
        {% csrf_token %}
        <input type="hidden" name="next" value="{{ request.path }}">
        <input type="hidden" name="language" value="en">
        <button type="submit" class="dropdown-item d-flex align-items-center">
          <img src="{% static 'images/flag/gb.png' %}" width="20" class="me-2"> English
        </button>
      </form>
    </li>
  </ul>
</div>





      <!-- Notifications -->
      <div class="dropdown ps-3">
        <a class="nav-link dropdown-toggle text-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" id="navbarLightDropdownMenuLink">
          <i class="bi-bell"></i>
          <span class="position-absolute start-100 translate-middle p-1 bg-danger border border-light rounded-circle">
            <span class="visually-hidden">New alerts</span>
          </span>
        </a>
        <ul class="dropdown-menu dropdown-menu-lg-end notifications-block-wrap bg-white shadow" aria-labelledby="navbarLightDropdownMenuLink">
          <small>Notifications</small>
          {% for note in request.user.notifications.all %}
          <li class="notifications-block border-bottom pb-2 mb-2">
            <a class="dropdown-item d-flex align-items-center" href="#">
              <div class="notifications-icon-wrap bg-{{ note.level|default:'info' }}">
                <i class="notifications-icon bi-{{ note.icon|default:'bell' }}"></i>
              </div>
              <div>
                <span>{{ note.message }}</span>
                <p>{{ note.timestamp|timesince }}{% trans " πριν" %}</p>
              </div>
            </a>
          </li>
          {% empty %}
          <li class="dropdown-item text-center">{% trans "Δεν υπάρχουν ειδοποιήσεις." %}</li>
          {% endfor %}
        </ul>
        
      </div>

      <!-- Social Dropdown -->
      <div class="dropdown ps-1">
        <a class="nav-link dropdown-toggle text-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi-three-dots-vertical"></i>
        </a>

        <div class="dropdown-menu dropdown-menu-social bg-white shadow">
          <div class="container">
            <div class="row">
              <div class="col-lg-4 col-md-4 col-4">
                <a class="dropdown-item text-center" href="#">
                  <img src="{% static 'images/social/search.png' %}" class="profile-image img-fluid" alt="">
                  <span class="d-block">Google</span>
                </a>
              </div>

              <div class="col-lg-4 col-md-4 col-4">
                <a class="dropdown-item text-center" href="#">
                  <img src="{% static 'images/social/spotify.png' %}" class="profile-image img-fluid" alt="">
                  <span class="d-block">Spotify</span>
                </a>
              </div>

              <div class="col-lg-4 col-md-4 col-4">
                <a class="dropdown-item text-center" href="#">
                  <img src="{% static 'images/social/telegram.png' %}" class="profile-image img-fluid" alt="">
                  <span class="d-block">Telegram</span>
                </a>
              </div>

              <div class="col-lg-4 col-md-4 col-4">
                <a class="dropdown-item text-center" href="#">
                  <img src="{% static 'images/social/snapchat.png' %}" class="profile-image img-fluid" alt="">
                  <span class="d-block">Snapchat</span>
                </a>
              </div>

              <div class="col-lg-4 col-md-4 col-4">
                <a class="dropdown-item text-center" href="#">
                  <img src="{% static 'images/social/tiktok.png' %}" class="profile-image img-fluid" alt="">
                  <span class="d-block">Tiktok</span>
                </a>
              </div>
              

              <div class="col-lg-4 col-md-4 col-4">
                <a class="dropdown-item text-center" href="#">
                  <img src="{% static 'images/social/youtube.png' %}" class="profile-image img-fluid" alt="">
                  <span class="d-block">Youtube</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Profile Dropdown -->
      <div class="dropdown px-3">
        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          {% if request.user.userprofile.profile_image %}
            <img src="{{ request.user.userprofile.profile_image }}" class="profile-image img-fluid me-3" alt="Προφίλ">
          {% else %}
            <img src="{% static 'images/profile-img.png' %}" class="profile-image img-fluid me-3" alt="Default">
          {% endif %}
        </a>

        <ul class="dropdown-menu bg-white shadow">
          <li>
            <div class="dropdown-menu-profile-thumb d-flex">
              {% if request.user.userprofile.profile_image %}
                <img src="{{ request.user.userprofile.profile_image }}" class="profile-image img-fluid me-3" alt="Προφίλ">
              {% else %}
                <img src="{% static 'images/profile-img.png' %}" class="profile-image img-fluid me-3" alt="Default">
              {% endif %}
              <div class="d-flex flex-column">
                <small>{{ request.user.username }}</small>
                <a href="#">{{ request.user.email }}</a>
              </div>
            </div>
          </li>
          <li><a class="dropdown-item" href="{% url 'profile' %}"><i class="bi-person me-2"></i>{% trans "Προφίλ" %}</a></li>
          <li><a class="dropdown-item" href="#"><i class="bi-gear me-2"></i>{% trans "Ρυθμίσεις" %}</a></li>
          <li><a class="dropdown-item" href="#"><i class="bi-question-circle me-2"></i>{% trans "Βοήθεια" %}</a></li>
          <li class="border-top mt-3 pt-2 mx-4">
            <form method="post" action="{% url 'logout' %}" class="d-inline">
              {% csrf_token %}
              <button type="submit" class="dropdown-item">
                <i class="bi-box-arrow-left me-2"></i>{% trans "Αποσύνδεση" %}
              </button>
            </form>
          </li>
        </ul>
      </div>
                <!-- Κουμπί για άνοιγμα offcanvas -->
                <div class="dropdown px-3">
                  <a class="btn btn-outline-secondary btn-sm" data-bs-toggle="offcanvas" href="#offcanvasMenu" role="button" aria-controls="offcanvasMenu">
                    <i class="bi-list"></i>
                  </a>
                </div>
    </div>
  </div>
  {% endif %}
</header>

<div class="offcanvas offcanvas-end" data-bs-scroll="true" tabindex="-1" id="offcanvasMenu" aria-labelledby="offcanvasMenuLabel">                
  <div class="offcanvas-header">                    
      <button type="button" class="btn-close ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  
  <div class="offcanvas-body d-flex flex-column justify-content-center align-items-center">

    <p class="offcanvas-subtitle">{% trans "Ημερολόγιο & Καταχωρήσεις" %}</p>
    <p class="offcanvas-subtitle">{% trans "Δημιουργήστε το δικό σας ημερολόγιο" %}</p>

      <nav>
          <ul>
            <li class="nav-item"><a class="nav-link" href="{% url 'calendar' %}"><i class="bi-calendar"></i> {% trans "Ημερολόγιο" %}</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'my_entries' %}"><i class="bi-journal-text"></i> {% trans "Καταχωρήσεις" %}</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'gallery' %}"><i class="bi bi-images"></i>{% trans "Γκαλερί" %}</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'trash' %}"><i class="bi-trash"></i>{% trans "Κάδος" %}</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'register' %}">{% trans "Εγγραφή" %}</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'contact' %}">{% trans "Επικοινωνία" %}</a></li>
          </ul>
          <br>
          <hr class="w-100 my-4">
          <div class="text-center">
            <form method="post" action="{% url 'logout' %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-link text-danger text-decoration-none">
                <i class="bi-box-arrow-right"></i> {% trans "Αποσύνδεση" %}
              </button>
            </form>
          </div>

      </nav>
  </div>
</div>
{% endblock %}






    <main class="w-100 px-3 py-4">
      <div class="container" style="max-width: 1500px;">
        {% block content %}{% endblock %}
      </div>
    </main>



  </div>
</div>

{% block footer %}
<footer class="text-center py-4 mt-auto">
  <div class="container">
    <div class="mb-2">
      <a href="{% url 'home' %}" class="text-decoration-none me-3">{% trans "Αρχική" %}</a>
      <a href="{% url 'register' %}" class="text-decoration-none me-3">{% trans "Εγγραφή" %}</a>
      <a href="{% url 'login' %}" class="text-decoration-none me-3">{% trans "Σύνδεση" %}</a>
      <a href="{% url 'contact' %}" class="text-decoration-none">{% trans "Επικοινωνία" %}</a>
    </div>
    <div>
      &copy; {% trans "2025 Reflectivo – Όλα τα δικαιώματα διατηρούνται." %}
    </div>
  </div>
</footer>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'js/popper.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/owl-carousel.js' %}"></script>
<script src="{% static 'js/scrollreveal.min.js' %}"></script>
<script src="{% static 'js/jquery.counterup.min.js' %}"></script>
<script src="{% static 'js/waypoints.min.js' %}"></script>
<script src="{% static 'js/imgfix.min.js' %}"></script>
<script src="{% static 'js/apexcharts.min.js' %}"></script>
<script src="{% static 'js/custom.js' %}"></script>
<script src="{% static 'js/lava.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
{% endblock %}



<script>
  document.addEventListener('DOMContentLoaded', function () {
    const toggleBtn = document.getElementById('theme-toggle');
    const body = document.body;

    function updateIcon() {
      const icon = document.getElementById('theme-icon');
      if (!icon) return;
      if (body.classList.contains('dark-mode')) {
        icon.className = "bi bi-sun"; // 🌞 for dark mode
      } else {
        icon.className = "bi bi-moon"; // 🌙 for light mode
      }
    }

    // Apply saved theme from localStorage
    if (localStorage.getItem('theme') === 'dark') {
      body.classList.add('dark-mode');
    }

    updateIcon();

    if (toggleBtn) {
      toggleBtn.addEventListener('click', () => {
        body.classList.toggle('dark-mode');
        const mode = body.classList.contains('dark-mode') ? 'dark' : 'light';
        localStorage.setItem('theme', mode);
        updateIcon();
      });
    }
  });
</script>



</div>
</body>
</html>
